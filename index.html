<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ESP Message Viewer</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #msg { font-size: 2em; color: green; }
  </style>
</head>
<body>
  <h1>ESP Message Viewer</h1>
  <p>Latest message from ESP:</p>
  <div id="msg">Đang chờ dữ liệu...</div>

  <script>
    // Thay đổi URL thành API backend bạn đã deploy
    const apiUrl = "https://185.199.108.153:3000/api/latest";

    async function fetchLatestMsg() {
      try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error('HTTP error ' + response.status);
        const data = await response.json();
        document.getElementById('msg').textContent = data.latest || 'Chưa có dữ liệu';
      } catch (error) {
        document.getElementById('msg').textContent = 'Lỗi kết nối API';
        console.error('Fetch error:', error);
      }
    }

    // Gọi API mỗi 2 giây
    setInterval(fetchLatestMsg, 2000);
    fetchLatestMsg(); // gọi ngay khi tải trang
  </script>
</body>
</html>
