<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ESP Message Viewer</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #msg { font-size: 2em; color: green; }
  </style>
</head>
<body>
  <h1>ESP Message Viewer</h1>
  <p>Latest message from ESP:</p>
  <div id="msg">Chưa có dữ liệu</div>

  <script>
    const apiUrl = "https://deptraitube.id.vn";

    async function fetchLatestMsg() {
      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        document.getElementById('msg').textContent = data.latest || 'Chưa có dữ liệu';
      } catch (error) {
        document.getElementById('msg').textContent = 'Lỗi kết nối API';
        console.error('Fetch error:', error);
      }
    }

    // Lấy dữ liệu mỗi 2 giây
    setInterval(fetchLatestMsg, 2000);

    // Lấy dữ liệu lần đầu khi load trang
    fetchLatestMsg();
  </script>
</body>
</html>
